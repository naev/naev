\documentclass{naev}
\usepackage[hybrid,pipeTables,tableCaptions,smartEllipses,fencedCode,footnotes]{markdown}

\usepackage{amssymb}   % for checkmarks
\usepackage{graphicx}  % for including images
\usepackage{microtype} % for typographical enhancements
\usepackage{minted}    % for code listings
\usepackage{amsmath}   % for equations and mathematics
\usepackage{polyglossia}
\usepackage{newunicodechar}
\setminted{style=friendly,fontsize=\small}
\renewcommand{\listoflistingscaption}{List of Code Listings}
\usepackage{hyperref}  % for hyperlinks
\usepackage[a4paper,top=4.2cm,bottom=4.2cm,left=3.5cm,right=3.5cm]{geometry} % for setting page size and margins
\usepackage{listings}
\usepackage{xcolor}
\usepackage{booktabs}

\makeatletter
\markdownSetup{
   renderers = {%
      inputVerbatim = {%
         \lstinputlisting[style=lua]{#1}%
      },
      inputFencedCode = {%
         \markdownRendererInputVerbatim{#1}%
      },
      table = {%
    \markdownLaTeXTable={}%
    \markdownLaTeXTableAlignment={}%
    \markdownLaTeXTableEnd={%
      \markdownLaTeXBottomRule
      \end{tabular}%
      \vspace{3mm}}%
    \ifx\empty#1\empty\else
      \addto@hook\markdownLaTeXTable{%
        \begin{table}[htbp]
        \centering}%
      \addto@hook\markdownLaTeXTableEnd{%
        \caption{#1}
        \end{table}}%
    \fi
    \addto@hook\markdownLaTeXTable{%
      \vspace{3mm}%
      \begin{tabular}}%
    \markdownLaTeXRowCounter=0%
    \markdownLaTeXRowTotal=#2%
    \markdownLaTeXColumnTotal=#3%
    \markdownLaTeXRenderTableRow
  }
   },
}
\makeatother

\usepackage{fontspec}
\setmainfont{Roboto}

\lstdefinestyle{lua}{
   language=[5.1]Lua,
}

\newunicodechar{âœ”}{{\checkmark}}

\definecolor{bluekeywords}{rgb}{0.13, 0.13, 1}
\definecolor{greencomments}{rgb}{0, 0.5, 0}
\definecolor{redstrings}{rgb}{0.9, 0, 0}
\definecolor{graynumbers}{rgb}{0.5, 0.5, 0.5}

\lstset{
	defaultdialect=[5.1]Lua
   autogobble,
   columns=fullflexible,
   showspaces=false,
   showtabs=false,
   breaklines=true,
   showstringspaces=false,
   breakatwhitespace=true,
   escapeinside={(*@}{@*)},
   commentstyle=\color{greencomments},
   keywordstyle=\color{bluekeywords},
   stringstyle=\color{redstrings},
   numberstyle=\color{graynumbers},
   basicstyle=\ttfamily\footnotesize,
   frame=l,
   framesep=12pt,
   xleftmargin=12pt,
   tabsize=4,
   captionpos=b,
   %numbers=left,
}

\title{Naev Development Manual}
\author{Naev DevTeam}
\version{0.10.0-alpha.1}
\softwarelogo{\includegraphics[width=8cm]{Naev.png}}

\begin{document}

\maketitle

\tableofcontents
%\listoflistings
\newpage

\markdownInput{sec/intro.md}
\markdownInput{sec/misn.md}
\markdownInput{sec/misn-basics.md}
\markdownInput{sec/misn-advanced.md}
\markdownInput{sec/misn-tips.md}
\input{sec/misn-example.tex}

\end{document}
