<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Naev Lua API: hook</title>
    <link rel="stylesheet" href="./luadoc.css" type="text/css" />
    <link rel="shortcut icon" href="../favicon.ico" />
</head>

<body>
<div id="naev-header">
   <div id="naev-top">
       <a href="http://naev.org">
           <img src="http://naev.org/naevsmall.png" alt="Home" style="vertical-align:baseline" />
       </a>
   </div>
   <ul class="naevlinks">
       <li>
           <a href="http://blog.naev.org/">Blog</a> &middot;
           <a href="http://forum.naev.org/">Forum</a> &middot;
           <a href="http://wiki.naev.org/">Wiki</a> &middot;
           <a href="http://blog.naev.org/downloads/">Downloads</a> &middot;
           <a href="http://api.naev.org/">Lua API</a> &middot;
           <a href="http://blog.naev.org/chat/">Chat</a>
       </li>
   </ul>
</div>

<div id="container">

<!-- <div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> --><!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>Naev Lua API</h1>
<ul>
	
	<li><a href="../index.html">Main</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="./bkg.html">bkg</a>
	</li>

	<li>
		<a href="./camera.html">camera</a>
	</li>

	<li>
		<a href="./colour.html">colour</a>
	</li>

	<li>
		<a href="./commodity.html">commodity</a>
	</li>

	<li>
		<a href="./diff.html">diff</a>
	</li>

	<li>
		<a href="./evt.html">evt</a>
	</li>

	<li>
		<a href="./faction.html">faction</a>
	</li>

	<li>
		<a href="./gfx.html">gfx</a>
	</li>

	<li>
		<a href="./gui.html">gui</a>
	</li>

	<li><strong>hook</strong></li>
	
	<li>
		<a href="./jump.html">jump</a>
	</li>

	<li>
		<a href="./misn.html">misn</a>
	</li>

	<li>
		<a href="./music.html">music</a>
	</li>

	<li>
		<a href="./naev.html">naev</a>
	</li>

	<li>
		<a href="./news.html">news</a>
	</li>

	<li>
		<a href="./outfit.html">outfit</a>
	</li>

	<li>
		<a href="./pilot.html">pilot</a>
	</li>

	<li>
		<a href="./planet.html">planet</a>
	</li>

	<li>
		<a href="./player.html">player</a>
	</li>

	<li>
		<a href="./rnd.html">rnd</a>
	</li>

	<li>
		<a href="./ship.html">ship</a>
	</li>

	<li>
		<a href="./system.html">system</a>
	</li>

	<li>
		<a href="./tex.html">tex</a>
	</li>

	<li>
		<a href="./time.html">time</a>
	</li>

	<li>
		<a href="./tk.html">tk</a>
	</li>

	<li>
		<a href="./tut.html">tut</a>
	</li>

	<li>
		<a href="./var.html">var</a>
	</li>

	<li>
		<a href="./vec2.html">vec2</a>
	</li>

</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>hook</code></h1>

<div>Lua bindings to manipulate hooks.
 
 Hooks allow you to trigger functions to certain actions like when the player
 jumps or a pilot dies.
 
 They can have arguments passed to them which will then get passed to the
 called hook function.
 
 Example usage would be:
 <pre>
 function penter( arg )
 -- Function to run when player enters a system
 end
 
 hookid = hook.enter( "penter", 5 )
 </pre>
 </div>





<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name"><a href="#hook.board">hook.board</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player boarding any ship.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.boarding">hook.boarding</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player boarding any ship.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.comm_buy">hook.comm_buy</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player buying any sort of commodity.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.comm_sell">hook.comm_sell</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player selling any sort of commodity.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.date">hook.date</a>&nbsp;(resolution, funcname, arg)</td>
	<td class="summary">Hooks a date change with custom resolution.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.discover">hook.discover</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to when the player discovers an asset, jump point or the likes.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.enter">hook.enter</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player entering a system (triggers when taking
 off too).</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.hail">hook.hail</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player hailing any ship (not a planet).</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.input">hook.input</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player pressing any input.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.jumpin">hook.jumpin</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player jumping (after changing systems).</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.jumpout">hook.jumpout</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player jumping (before changing systems).</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.land">hook.land</a>&nbsp;(funcname, where, arg)</td>
	<td class="summary">Hooks the function to the player landing.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.load">hook.load</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player loading the game (starts landed).</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.mouse">hook.mouse</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player clicking the mouse.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.pilot">hook.pilot</a>&nbsp;(pilot, type, funcname, arg)</td>
	<td class="summary">Hooks the function to a specific pilot.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.rm">hook.rm</a>&nbsp;(h)</td>
	<td class="summary">Removes a hook previously created.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.safe">hook.safe</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hook run at the end of each frame.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.standing">hook.standing</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to any faction standing change.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.takeoff">hook.takeoff</a>&nbsp;(funcname, arg)</td>
	<td class="summary">Hooks the function to the player taking off.</td>
	</tr>

	<tr>
	<td class="name"><a href="#hook.timer">hook.timer</a>&nbsp;(ms, funcname, arg)</td>
	<td class="summary">Hooks a timer.</td>
	</tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="hook.board"></a><strong>hook.board</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player boarding any ship.
 
 The hook receives a single parameter which is the ship being boarded.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.boarding"></a><strong>hook.boarding</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player boarding any ship.
 
 The hook receives a single parameter which is the ship doing the boarding.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.comm_buy"></a><strong>hook.comm_buy</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player buying any sort of commodity.
 
 The hook receives the name of the commodity and the quantity being bought.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.comm_sell"></a><strong>hook.comm_sell</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player selling any sort of commodity.
 
 The hook receives the name of the commodity and the quantity being bought.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.date"></a><strong>hook.date</strong>&nbsp;(resolution, funcname, arg)</dt>
<dd>
Hooks a date change with custom resolution.
 
 The hook receives only the optional argument.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  resolution: Resolution of the timer (should be a time structure).
	</li>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>




<br />
<h3>Usage:</h3>
<code>hook.date( time.create( 0, 0, 1000 ), "some_func", nil ) -- Hooks with a 1000 STU resolution
 </code>



<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.discover"></a><strong>hook.discover</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to when the player discovers an asset, jump point or the likes.
 
 The parameters passed to the function are the type which can be one of:<br/>
 - "asset" <br/>
 - "jump" <br/>
 and the actual asset or jump point discovered with the following format: <br/>
 function f( type, discovery )
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.enter"></a><strong>hook.enter</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player entering a system (triggers when taking
 off too).
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.hail"></a><strong>hook.hail</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player hailing any ship (not a planet).
 
 The hook receives a single parameter which is the ship being hailed.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.input"></a><strong>hook.input</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player pressing any input.
 
 It returns the name of the key being pressed like "accel" and whether or not it's a press.<br/>
 <br/>
 Functions should be in format:<br/>
 function f( inputname, inputpress, args )
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.jumpin"></a><strong>hook.jumpin</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player jumping (after changing systems).
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.jumpout"></a><strong>hook.jumpout</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player jumping (before changing systems).
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.land"></a><strong>hook.land</strong>&nbsp;(funcname, where, arg)</dt>
<dd>
Hooks the function to the player landing.
 
 Can also be used to hook the various subparts of the landing menu. Possible targets
 for where are:<br />
 - "land" - when landed (default with no parameter )<br />
 - "outfits" - when visited outfitter<br />
 - "shipyard" - when visited shipyard<br />
 - "bar" - when visited bar<br />
 - "mission" - when visited mission computer<br />
 - "commodity" - when visited commodity exchange<br />
 - "equipment" - when visiting equipment place<br />
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  where: Optional argument to specify where to hook the function.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>




<h3>Usage</h3>
<ul>
	
	<li><code>hook.land( "my_function" ) -- Land calls my_function</code></li>
	
	<li><code>hook.land( "my_function", "equipment" ) -- Calls my_function at equipment screen
 </code></li>
	
</ul>



<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.load"></a><strong>hook.load</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player loading the game (starts landed).
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>




<br />
<h3>Usage:</h3>
<code>hook.load( "my_function" ) -- Load calls my_function
 </code>



<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.mouse"></a><strong>hook.mouse</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player clicking the mouse.
 
 The parameter passed to the function is the button pressed (1==left,2==middle,3==right).
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.pilot"></a><strong>hook.pilot</strong>&nbsp;(pilot, type, funcname, arg)</dt>
<dd>
Hooks the function to a specific pilot.
 
 You can hook to different actions.  Currently hook system only supports:<br />
 <ul>
 <li> "death" : triggered when pilot dies (before marked as dead). </li>
 <li> "exploded" : triggered when pilot has died and the final explosion has begun. </li>
 <li> "boarding" : triggered when a pilot boards another ship (start of boarding).</li>
 <li> "board" : triggered when a pilot is boarded (start of boarding).</li>
 <li> "disable" : triggered when pilot is disabled (with disable set).</li>
 <li> "undisable" : triggered when pilot recovers from being disabled.</li>
 <li> "jump" : triggered when pilot jumps to hyperspace (before he actually jumps out).</li>
 <li> "hail" : triggered when pilot is hailed.</li>
 <li> "land" : triggered when pilot is landing (right when starting land descent).</li>
 <li> "attacked" : triggered when the pilot is attacked. </li>
 <li> "idle" : triggered when the pilot becomes idle in manual control.</li>
 <li> "lockon" : triggered when the pilot locked on a missile on it's target.</li>
 </ul>
 <br />
 If you pass nil as pilot, it will set it as a global hook that will jump for all pilots.<br />
 <br />
 DO NOT DO UNSAFE THINGS IN PILOT HOOKS. THIS MEANS STUFF LIKE player.teleport(). IF YOU HAVE DOUBTS USE A "safe" HOOK.<br />
 <br />
 These hooks all pass the pilot triggering the hook as a parameter, so they should have the structure of:
 <p>
 function my_hook( pilot, arg )<br />
 end
 </p>
 The combat hooks also pass the pilot acting on it, so for example the pilot
 that disabled, attacked or killed the selected pilot. They have the
 following format:
 <p>
 function combat_hook( pilot, attacker, arg )<br />
 end
 </p>
 Please note that in the case of disable or death hook the attacker may be nil
 indicating that it was killed by other means like for example the shockwave
 of a dying ship or nebula volatility.<br />
 <br />
 The land and jump hooks also pass the asset or jump point the pilot is
 landing at or jumped from, respectively:
 <p>
 function land_hook( pilot, planet, arg )<br />
 end
 </p>
 <p style="margin-bottom: 0">
 function jump_hook( pilot, jump_point, arg )<br />
 end
 </p>


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  pilot: Pilot identifier to hook (or nil for all).
	</li>
	
	<li>
	  type: One of the supported hook types.
	</li>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.rm"></a><strong>hook.rm</strong>&nbsp;(h)</dt>
<dd>
Removes a hook previously created.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  h: Identifier of the hook to remove.
	</li>
	
</ul>




<br />
<h3>Usage:</h3>
<code>hook.rm( h ) -- Hook is removed
 </code>





</dd>




<dt><a name="hook.safe"></a><strong>hook.safe</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hook run at the end of each frame.
 
 This hook is a good way to do possibly breaking stuff like for example player.teleport().
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.standing"></a><strong>hook.standing</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to any faction standing change.
 
 The parameters passed to the function are faction whose standing is being
 changed and the amount changed:<br/>
 function f( faction, change, args )
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.takeoff"></a><strong>hook.takeoff</strong>&nbsp;(funcname, arg)</dt>
<dd>
Hooks the function to the player taking off.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>




<dt><a name="hook.timer"></a><strong>hook.timer</strong>&nbsp;(ms, funcname, arg)</dt>
<dd>
Hooks a timer.
 
 The hook receives only the optional argument.
 


<br />
<h3>Parameters</h3>
<ul>
	
	<li>
	  ms: Milliseconds to delay.
	</li>
	
	<li>
	  funcname: Name of function to run when hook is triggered.
	</li>
	
	<li>
	  arg: Argument to pass to hook.
	</li>
	
</ul>






<br />
<h3>Return value:</h3>
Hook identifier.



</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
